{"componentChunkName":"component---src-templates-blog-post-js","path":"/real-power-of-react-custom-hooks/","result":{"data":{"markdownRemark":{"html":"<p>Before <a href=\"https://reactjs.org/docs/hooks-intro.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">React Hooks</a>, non class-based components were often called <strong>stateless functional components</strong>, or <strong>dumb components</strong>. Such components wouldn't have access to state nor do they have any lifecycle hook. As a result, the stateless functional component relies on its props as the only input.</p>\n<p>For the mere purpose of presentation, the stateless functional component is almost always preferred over a class-based component due to its simpler syntaxes.</p>\n<p>However, modern application is not all about presentation. Often, we need our application to remember stuff or perform a specific task when it reaches a certain lifecycle. Stateless functional components can do neither, the answer has to be a <strong>class component</strong>.</p>\n<p>As a smarter counterpart, the class component has a built-in state object that you can access via <code class=\"language-text\">this.state</code>. It also provides a number of callbacks to several points of its lifecycles such as <code class=\"language-text\">componentDidMount</code>, <code class=\"language-text\">componentWillUnmount</code>, <code class=\"language-text\">componentWillReceiveProps</code>, and many more. Consequently, for anything beyond presentational, <strong>there is no alternative to class component</strong>.</p>\n<p>The problem is, <strong>class components are hard to use</strong>. People can understand how states, props, and data flows work perfectly but still struggle to understand class. Due to these reasons, <a href=\"https://github.com/reactjs/rfcs/blob/master/text/0068-react-hooks.md\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">React team felt that there has to be a better solution</a>--and the rest is history.</p>\n<h2>What Are React Hooks Anyway?</h2>\n<p>A React Hooks is a function with a specific logic that you can hook into a stateless functional component. Hooks provide a powerful and expressive way to reuse logic across multiple components (more on this later). Something that wasn't possible with class components without complex restructures.</p>\n<p>There are two types of Hooks in React.</p>\n<h3>State Hooks</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/70f9dc1706387265ca6751394ec4a8de/48d26/state_hook.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 70.625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAECBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAD/9oADAMBAAIQAxAAAAHmYKTiD//EABgQAAIDAAAAAAAAAAAAAAAAAAACESBB/9oACAEBAAEFAlWTaf/EABYRAAMAAAAAAAAAAAAAAAAAAAEQMf/aAAgBAwEBPwEVf//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABYQAAMAAAAAAAAAAAAAAAAAABAgIf/aAAgBAQAGPwJIP//EABsQAQACAgMAAAAAAAAAAAAAAAEAERAhMUGB/9oACAEBAAE/IabuVwwKSzonuP/aAAwDAQACAAMAAAAQGP8A/8QAFxEBAAMAAAAAAAAAAAAAAAAAARARIf/aAAgBAwEBPxANlcj/xAAWEQADAAAAAAAAAAAAAAAAAAABEDH/2gAIAQIBAT8QMX//xAAbEAACAwADAAAAAAAAAAAAAAABEQAhMRBhwf/aAAgBAQABPxB0KKUZaKKh0w7RIB1HYRaHbecf/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"React State Hooks\"\n        title=\"React State Hooks\"\n        src=\"/static/70f9dc1706387265ca6751394ec4a8de/c08c5/state_hook.jpg\"\n        srcset=\"/static/70f9dc1706387265ca6751394ec4a8de/0913d/state_hook.jpg 160w,\n/static/70f9dc1706387265ca6751394ec4a8de/cb69c/state_hook.jpg 320w,\n/static/70f9dc1706387265ca6751394ec4a8de/c08c5/state_hook.jpg 640w,\n/static/70f9dc1706387265ca6751394ec4a8de/6a068/state_hook.jpg 960w,\n/static/70f9dc1706387265ca6751394ec4a8de/eea4a/state_hook.jpg 1280w,\n/static/70f9dc1706387265ca6751394ec4a8de/48d26/state_hook.jpg 2245w\"\n        sizes=\"(max-width: 640px) 100vw, 640px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>A <strong>State Hook</strong> provides a getter and setter that associates to a single value in a component. The state provided by a State Hook can be of any type, be it object, array, string, number, null, or whatever you want.</p>\n<p>Just like state in a class component, changes in a state value causes the component to perform a re-render. For a smaller component with simpler states, <code class=\"language-text\">useState</code> is the perfect solution.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">KeywordRenderer</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>keyword<span class=\"token punctuation\">,</span> setKeyword<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hello World!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>my-keyword<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>keyword<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span> <span class=\"token comment\">// Hello World!</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>However, <code class=\"language-text\">useState</code> falls short when it comes to complex state logic that involves multiple values and sub-values. As an alternative, you can use <code class=\"language-text\">useReducer</code> to solve that.</p>\n<h3>Effect Hooks</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/95f9017d2ae6b5c569c5a7532bf2db2f/48d26/effect_hook.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 70.625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIBBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAD/9oADAMBAAIQAxAAAAHmQ2k5B//EABgQAAMBAQAAAAAAAAAAAAAAAAIQEQBB/9oACAEBAAEFAhG7qq//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAWEAADAAAAAAAAAAAAAAAAAAAQICH/2gAIAQEABj8CSD//xAAcEAABAwUAAAAAAAAAAAAAAAABABARITFBYYH/2gAIAQEAAT8hhmqAs2wMKAyHW//aAAwDAQACAAMAAAAQCD//xAAXEQEAAwAAAAAAAAAAAAAAAAABEBEh/9oACAEDAQE/EAbVcj//xAAXEQADAQAAAAAAAAAAAAAAAAABECEx/9oACAECAQE/EDkX/8QAHBABAQACAgMAAAAAAAAAAAAAAREAITFxEEHB/9oACAEBAAE/ELRiZpooAZ3jy9470oewZc2ZR5Wvnj//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"React Effect Hooks\"\n        title=\"React Effect Hooks\"\n        src=\"/static/95f9017d2ae6b5c569c5a7532bf2db2f/c08c5/effect_hook.jpg\"\n        srcset=\"/static/95f9017d2ae6b5c569c5a7532bf2db2f/0913d/effect_hook.jpg 160w,\n/static/95f9017d2ae6b5c569c5a7532bf2db2f/cb69c/effect_hook.jpg 320w,\n/static/95f9017d2ae6b5c569c5a7532bf2db2f/c08c5/effect_hook.jpg 640w,\n/static/95f9017d2ae6b5c569c5a7532bf2db2f/6a068/effect_hook.jpg 960w,\n/static/95f9017d2ae6b5c569c5a7532bf2db2f/eea4a/effect_hook.jpg 1280w,\n/static/95f9017d2ae6b5c569c5a7532bf2db2f/48d26/effect_hook.jpg 2245w\"\n        sizes=\"(max-width: 640px) 100vw, 640px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Side-effect (or just \"effect\") refers to a programming paradigm in which a function affects something outside its local scope. A function with side-effect makes it non-deterministic—that is the result of a function may differ every time it is called.</p>\n<p>An <strong>Effect Hook</strong> lets you perform said side-effect. Side-effects could take many forms: data-fetching, subscription, or manually changing DOM in React component.</p>\n<p>For example, with <code class=\"language-text\">useEffect</code> you can tell React to invokes an effect after the initial render. <code class=\"language-text\">useEffect</code> basically <strong>tells React to do something after a render</strong>. This Hook although not the same, can be thought of as the alternative to class component lifecycle callbacks such as <code class=\"language-text\">componentDidMount</code>, <code class=\"language-text\">componentWillReceiveProps</code>, etc.</p>\n<p>One of the common use cases for this Hook is to fetch data after the initial render.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useEffect<span class=\"token punctuation\">,</span> useState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">MyList</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> id <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>list<span class=\"token punctuation\">,</span> setList<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// After initial render, setup a timer that updates state every second.</span>\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">https://api.someurl/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>id<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resp</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setList</span><span class=\"token punctuation\">(</span>resp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>id<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token comment\">// Render `list`</span>\n\t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>The example above is considered a component with side-effect because it depends on external data-source. there's no guarantee that the component always renders the same output.</p>\n<h2>Why Is Custom Hook Necessary?</h2>\n<p>Imagine for a moment, you write a React component that displays and updates value from local storage. The value would persist even after a page refresh. How would you go writing it?</p>\n<p>A component of this kind would require a state to store the value, an effect to retrieve from local storage, and a handler to set updated value.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useEffect<span class=\"token punctuation\">,</span> useState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> key <span class=\"token operator\">=</span> <span class=\"token string\">'my-key'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">PersistentRenderer</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>val<span class=\"token punctuation\">,</span> setVal<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> localValue <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span>localstorage<span class=\"token punctuation\">.</span><span class=\"token function\">getItem</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">setVal</span><span class=\"token punctuation\">(</span>localValue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleUpdateValue</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    window<span class=\"token punctuation\">.</span>localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">setItem</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>val <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">setVal</span><span class=\"token punctuation\">(</span>val <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      Value: </span><span class=\"token punctuation\">{</span>val<span class=\"token punctuation\">}</span><span class=\"token plain-text\"> \n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handleUpdateValue<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Tick</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>The solution is straightforward. You happily implement the details. But you realize the same functionality is needed elsewhere. So you do what you've always done, <strong>copy and paste</strong> the solution, perhaps with slight modification, and call it a day.</p>\n<p>Now, what if the same functionality is needed in three more places?</p>\n<p>To solve this, React allows you to write <strong>custom Hooks</strong> that extract specific business logic into a reusable piece.</p>\n<p>Let's see how it works.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// .../hooks/useLocalStorage.js</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useState<span class=\"token punctuation\">,</span> useEffect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Custom key and initial value</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useLocalStorage</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">key<span class=\"token punctuation\">,</span> initialValue</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">readValue</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> item <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span>localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">getItem</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span> item <span class=\"token operator\">?</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> initialValue<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">warn</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Error!'</span><span class=\"token punctuation\">,</span> e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span> initialValue<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// Here, we store the value from previous function to the state hook</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>storedValue<span class=\"token punctuation\">,</span> setStoredValue<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token function\">readValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">setValue</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">newValue</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n      window<span class=\"token punctuation\">.</span>localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">setItem</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>newValue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token function\">setStoredValue</span><span class=\"token punctuation\">(</span>newValue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token comment\">// Notify, so useLocalStorage hooks everywhere are notified</span>\n      window<span class=\"token punctuation\">.</span><span class=\"token function\">dispatchEvent</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Event</span><span class=\"token punctuation\">(</span><span class=\"token string\">'local-storage'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">warn</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Error!'</span><span class=\"token punctuation\">,</span> e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleStorageChange</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setStoredValue</span><span class=\"token punctuation\">(</span><span class=\"token function\">readValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// Listen to storage change, update the state accordingly</span>\n    window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'storage'</span><span class=\"token punctuation\">,</span> handleStorageChange<span class=\"token punctuation\">)</span>\n    window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'local-storage'</span><span class=\"token punctuation\">,</span> handleStorageChange<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      window<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'storage'</span><span class=\"token punctuation\">,</span> handleStorageChange<span class=\"token punctuation\">)</span>\n      window<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'local-storage'</span><span class=\"token punctuation\">,</span> handleStorageChange<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token comment\">// Output the getter and setter</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>storedValue<span class=\"token punctuation\">,</span> setValue<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Use the custom Hook.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> useLocalStorage <span class=\"token keyword\">from</span> <span class=\"token string\">'../hooks/useLocalStorage'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> key <span class=\"token operator\">=</span> <span class=\"token string\">'my-key'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">PersistentRenderer</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>localValue<span class=\"token punctuation\">,</span> setLocalValue<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useLocalStorage</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      Value: </span><span class=\"token punctuation\">{</span>localValue<span class=\"token punctuation\">}</span><span class=\"token plain-text\"> \n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setLocalValue</span><span class=\"token punctuation\">(</span>localValue <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Tick</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Now that we move the cumbersome business logic to a custom Hook, any component that relies on the same functionality can benefit from it without us having to rewrite it.</p>\n<h2>What Makes Custom Hooks Powerful?</h2>\n<p>The built-in React Hooks can be thought of as basic building blocks that you can combine to create a custom Hook that covers a wide range of use cases. This is possible because of two reasons.</p>\n<h3>Custom Hook Is Just Another Function</h3>\n<p>You can do anything you want with it: to store some values, to perform an HTTP request, to translate a piece of text—you name it. As a function, it doesn't specify any signature. <strong>You decide what it takes as an argument and what it should return</strong>.</p>\n<h3>Custom Hook Is Stateful</h3>\n<p>Similar to its component counterpart, a custom Hooks <strong>may have one or more states and side-effects</strong>. When a custom Hook is attached to a component, React treats it as if the logic was performed by the component itself.</p>\n<p>Furthermore, each custom Hook gets its own isolated state. When two components access the same custom Hook, <strong>they don't share the state</strong>. Instead, they will both get a completely independent state.</p>\n<p>To showcase the statefulness and isolated characteristic of a custom Hook, let's revisit the previous <code class=\"language-text\">useLocalStorage</code> Hook example.</p>\n<p>Suppose we want to pull data from multiple local storage fields.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> useLocalStorage <span class=\"token keyword\">from</span> <span class=\"token string\">'../hooks/useLocalStorage'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> firstKey <span class=\"token operator\">=</span> <span class=\"token string\">'my-first-key'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> secondKey <span class=\"token operator\">=</span> <span class=\"token string\">'my-second-key'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">PersistentRenderer</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>firstVal<span class=\"token punctuation\">,</span> setFirstVal<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useLocalStorage</span><span class=\"token punctuation\">(</span>firstKey<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>secondVal<span class=\"token punctuation\">,</span> setSecondVal<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useLocalStorage</span><span class=\"token punctuation\">(</span>secondKey<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        First Value: </span><span class=\"token punctuation\">{</span>firstVal<span class=\"token punctuation\">}</span><span class=\"token plain-text\"> \n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setFirstVal</span><span class=\"token punctuation\">(</span>firstVal <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Tick First</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        Second Value: </span><span class=\"token punctuation\">{</span>secondVal<span class=\"token punctuation\">}</span><span class=\"token plain-text\"> \n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setSecondVal</span><span class=\"token punctuation\">(</span>secondVal <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Tick Second</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>We would simply call another <code class=\"language-text\">useLocalStorage</code> with slight modification. Both custom Hooks never share the state because they are completely isolated.</p>\n<h2>Conclusion</h2>\n<p>I'm willing to bet you've encountered or perhaps contribute to a <strong>wrapper hell</strong> yourself. A wrapper hell happens when you surround a component with layers of <strong>provider</strong>, <strong>consumer</strong>, <strong>higher-order component</strong>, <strong>render props</strong>, <strong>localization</strong>, and other abstraction layers. All these layers not only chip away performances, but they also make it much harder to understand let alone extend functionality on top of it.</p>\n<p>Fortunately, with the addition of React Hooks, the wrapper hell can now be easily avoided. There are, however, some rules we need to keep in mind when making use of React Hooks API.</p>\n<ul>\n<li><strong>Only call Hooks either from React function component or custom Hooks</strong>.</li>\n<li><strong>Only call Hooks at the top level of your component</strong>.</li>\n</ul>\n<p>Finally, React Hooks are flexible and highly customizable to suit your needs. You can write custom Hooks that abstract away the complexity and reuse them between components.</p>\n<h3>Bonus</h3>\n<p>Here is a non-exhaustive <strong>list of popular custom Hooks libraries</strong> that can make your life easier.</p>\n<p><a href=\"https://github.com/streamich/use-media\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">useMedia</a> → Tracks the state of CSS media query.</p>\n<p><a href=\"https://reactrouter.com/web/api/Hooks\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">React Router Hooks</a> → If you use React Router, Access the state of the router and perform navigation from inside the components.</p>\n<p><a href=\"https://github.com/CharlesStover/use-clippy\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">useClippy</a> → Performs a \"copy to clipboard\".</p>\n<p><a href=\"https://github.com/rehooks/document-title\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">useDocumentTitle</a> → Change the title of your document.</p>\n<p><a href=\"https://github.com/xnimorz/use-debounce\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">useDebounceCallback</a> &#x26; <a href=\"https://github.com/streamich/react-use/blob/master/docs/useThrottle.md\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">useThrottleFn</a> → Controls the rate at which the function is called.</p>\n<p><a href=\"https://react.i18next.com/latest/usetranslation-hook\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">useTranslation</a> → Translate your document</p>\n<p><a href=\"https://github.com/donavon/use-dark-mode\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">useDarkMode</a> → Enables and disables the dark mode</p>\n<p><a href=\"https://github.com/pbeshai/use-query-params\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">useQueryParam</a> → Encode and decode data of any type as a query parameter</p>\n<p><a href=\"https://usehooks.com/useLocalStorage/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">useLocalStorage</a> → Persistent state for your React component</p>","frontmatter":{"title":"The Real Power of React Custom Hooks","date":"2021-02-18","shortDesc":"And why you should be using them.","featuredImage":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAIDAQT/xAAVAQEBAAAAAAAAAAAAAAAAAAAEAv/aAAwDAQACEAMQAAAB6GeZJ0mFV//EABgQAAMBAQAAAAAAAAAAAAAAAAABEBIx/9oACAEBAAEFAjM4Nz//xAAZEQABBQAAAAAAAAAAAAAAAAACAQMEECH/2gAIAQMBAT8BbjoOlX//xAAbEQACAQUAAAAAAAAAAAAAAAAAAgEDBBEhMf/aAAgBAgEBPwGrdS+l4YP/xAAWEAADAAAAAAAAAAAAAAAAAAAAICH/2gAIAQEABj8CKv8A/8QAGRABAAMBAQAAAAAAAAAAAAAAAQAhMRAR/9oACAEBAAE/IdzYAuzFgBrh7P/aAAwDAQACAAMAAAAQPM//xAAXEQEAAwAAAAAAAAAAAAAAAAABEEGh/9oACAEDAQE/ELicI//EABoRAAAHAAAAAAAAAAAAAAAAAAEQESFBUdH/2gAIAQIBAT8QW27SOE//xAAZEAEAAwEBAAAAAAAAAAAAAAABABEhQVH/2gAIAQEAAT8QFoC/BEbTw4TWVcb16yxWOp//2Q==","aspectRatio":1.3333333333333333,"src":"/static/ee0e15116127fc5cfa2bc9bbba8d17a4/f422e/hook.jpg","srcSet":"/static/ee0e15116127fc5cfa2bc9bbba8d17a4/e75b5/hook.jpg 160w,\n/static/ee0e15116127fc5cfa2bc9bbba8d17a4/c01e2/hook.jpg 320w,\n/static/ee0e15116127fc5cfa2bc9bbba8d17a4/f422e/hook.jpg 640w,\n/static/ee0e15116127fc5cfa2bc9bbba8d17a4/a6352/hook.jpg 960w,\n/static/ee0e15116127fc5cfa2bc9bbba8d17a4/ec6c5/hook.jpg 1280w,\n/static/ee0e15116127fc5cfa2bc9bbba8d17a4/d8255/hook.jpg 1920w","sizes":"(max-width: 640px) 100vw, 640px"}}}},"timeToRead":8,"excerpt":"Before React Hooks, non class-based components were often called stateless functional components, or dumb components. Such components wouldn…","fields":{"slug":"/real-power-of-react-custom-hooks/"}}},"pageContext":{"slug":"/real-power-of-react-custom-hooks/"}},"staticQueryHashes":["3649515864","572726844"]}